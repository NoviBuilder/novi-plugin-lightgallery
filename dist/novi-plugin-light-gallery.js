module.exports=function(e){function t(i){if(n[i])return n[i].exports;var l=n[i]={exports:{},id:i,loaded:!1};return e[i].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=g.getDataByKey("novi-plugin-light-gallery");return e.ui.editor[2].title=t.editor.group.title,e.ui.editor[2].tooltip=t.editor.group.tooltip,e.ui.editor[2].header[1]=p.createElement("span",null,t.editor.group.header),e.ui.editor[1].title=t.editor.item.title,e.ui.editor[1].tooltip=t.editor.item.tooltip,e.ui.editor[1].header[1]=p.createElement("span",null,t.editor.item.header),e.ui.editor[0].title=t.editor.album.title,e.ui.editor[0].tooltip=t.editor.album.tooltip,e.ui.editor[0].header[1]=p.createElement("span",null,t.editor.album.header),e}var r=n(1),a=i(r),o=n(4),s=i(o),c=n(8),u=i(c),h=n(10),m=i(h),p=novi.react.React,g=novi.language,d={name:"novi-plugin-light-gallery",title:"Novi Light Gallery",description:"Novi Light Gallery description",version:"1.0.1",dependencies:{novi:"0.8.6"},defaults:{groupQuerySelector:'[data-lightgallery="group"]',albumQuerySelector:'[data-lightgallery="dynamic"]',childQuerySelector:'[data-lightgallery="item"]',querySelector:'[data-lightgallery="group"], [data-lightgallery="dynamic"], [data-lightgallery="item"]'},ui:{editor:[u.default,s.default,a.default],settings:p.createElement(m.default,null)},onLanguageChange:l};novi.plugins.register(d)},function(e,t,n){"use strict";function i(e,t){var n=t[0];n.loop!==n.initValue.loop&&novi.element.setAttribute(n.element,"data-lg-loop",n.loop),n.thumbnail!==n.initValue.thumbnail&&novi.element.setAttribute(n.element,"data-lg-thumbnail",n.thumbnail),n.autoplay!==n.initValue.autoplay&&novi.element.setAttribute(n.element,"data-lg-autoplay",n.autoplay),n.autoplayTime!==n.initValue.autoplayTime&&novi.element.setAttribute(n.element,"data-lg-autoplay-delay",1e3*n.autoplayTime),c.isEqual(n.animation,n.initValue.animation)||novi.element.setAttribute(n.element,"data-lg-animation",n.animation.value)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),a=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=novi.react.React,c=(novi.ui.icons,novi.utils.lodash),u=novi.language.getDataByKey("novi-plugin-light-gallery"),h={trigger:s.createElement("svg",{viewBox:"0 0 20 20"},s.createElement("path",{d:"M16.7,19H1.5l0,0C1,19,1,18.5,1,18.5V4.6H0v13.8C0,19.3,0.7,20,1.5,20h15.2"}),s.createElement("path",{d:"M18.5,16h-14l0,0C4,16,4,15.5,4,15.5V1.6H3v13.8C3,16.3,3.7,17,4.5,17h14"}),s.createElement("path",{d:"M4,14.8V1.5l0,0C4,1,4.5,1,4.5,1H11V0L4.6,0C3.7,0,3,0.7,3,1.5v13.3"}),s.createElement("path",{d:"M19,10.2v5.2l0,0c0,0.5-0.5,0.5-0.5,0.5H7.2v1h11.2c0.9,0,1.6-0.7,1.6-1.5v-5.2"}),s.createElement("path",{d:"M15.5,6.2c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2c0.7,0,1.2,0.5,1.2,1.2S16.2,6.2,15.5,6.2z M15.5,4.6\r c-0.2,0-0.4,0.2-0.4,0.4s0.2,0.4,0.4,0.4s0.4-0.2,0.4-0.4S15.7,4.6,15.5,4.6z"}),s.createElement("path",{d:"M14.3,9.3h-0.1c-0.7-0.2-1.3-0.6-1.8-1c0-0.1-0.1-0.2-0.1-0.3c0-0.1,0.1-0.2,0.2-0.3c0.3-0.2,0.4-0.7,0.2-1S12.2,6.2,12,6.2\r c-0.1,0-0.2,0-0.3,0.1c-0.1,0-0.2,0-0.3,0c-0.2-0.1-0.3-0.2-0.3-0.3C11,5.7,11,5.3,11,5c0-0.3,0-0.7,0.1-1c0-0.1,0.1-0.2,0.2-0.3\r c0.1,0,0.2,0,0.4,0c0.1,0,0.2,0.1,0.3,0.1c0.3,0,0.6-0.2,0.7-0.4c0.2-0.3,0.1-0.8-0.2-1c-0.1-0.1-0.2-0.3-0.2-0.4\r c0-0.1,0-0.2,0.1-0.3c0.5-0.5,1.1-0.8,1.7-1c0.1,0,0.2,0,0.3,0c0.1,0,0.2,0.2,0.2,0.3c0.1,0.4,0.5,0.7,0.9,0.7s0.7-0.3,0.8-0.7\r c0-0.1,0.1-0.2,0.2-0.3c0.1,0,0.2,0,0.3,0c0.6,0.2,1.2,0.6,1.7,1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1-0.1,0.2-0.2,0.3\r c-0.3,0.2-0.4,0.7-0.2,1c0.3,0.3,0.5,0.5,0.8,0.5c0.1,0,0.2,0,0.3-0.1c0.1,0,0.2,0,0.3,0c0.1,0.1,0.2,0.2,0.2,0.3\r C19.9,4.3,20,4.7,20,5s0,0.7-0.1,1c0,0.1-0.1,0.2-0.2,0.3c-0.1,0.1-0.2,0.1-0.3,0c-0.2-0.1-0.3-0.1-0.4-0.1c-0.3,0-0.6,0.2-0.7,0.4\r c-0.2,0.4-0.1,0.8,0.2,1.1c0.1,0.1,0.1,0.2,0.2,0.3c0,0.1,0,0.2-0.1,0.3c-0.6,0.4-1.2,0.8-1.8,1c-0.1,0-0.2,0-0.3,0\r c-0.1-0.1-0.2-0.2-0.2-0.3c-0.1-0.4-0.4-0.7-0.8-0.7S14.7,8.6,14.7,9c0,0.1-0.1,0.2-0.2,0.3C14.4,9.3,14.4,9.3,14.3,9.3L14.3,9.3z\r M13.3,8c0.2,0.1,0.5,0.3,0.7,0.4c0.1-0.2,0.2-0.4,0.4-0.5c0.3-0.3,0.7-0.4,1.1-0.4s0.8,0.1,1.1,0.4C16.7,8,16.9,8.2,17,8.4\r c0.3-0.1,0.5-0.2,0.7-0.4c-0.2-0.2-0.2-0.4-0.3-0.6c-0.1-0.4,0-0.8,0.2-1.1c0.3-0.6,0.8-0.9,1.4-0.9h0.1c0-0.1,0-0.3,0-0.4\r s0-0.3,0-0.4H19c-0.6,0-1.1-0.3-1.4-0.8c-0.2-0.4-0.3-0.8-0.2-1.1c0-0.2,0.1-0.4,0.2-0.6c-0.2-0.2-0.4-0.4-0.6-0.5\r c-0.1,0.2-0.3,0.4-0.4,0.6c-0.3,0.2-0.7,0.4-1.1,0.4s-0.8-0.2-1.1-0.4C14.2,2,14.1,1.8,14,1.6c-0.2,0.1-0.5,0.3-0.7,0.5\r c0.1,0.1,0.2,0.3,0.3,0.6c0.1,0.4,0,0.8-0.2,1.1c-0.3,0.5-0.9,0.8-1.4,0.8h-0.1c0,0.1,0,0.3,0,0.4s0,0.3,0,0.4H12\r c0.6,0,1.1,0.3,1.4,0.8c0.2,0.3,0.3,0.7,0.2,1.1C13.5,7.6,13.4,7.8,13.3,8L13.3,8z"})),tooltip:u.editor.group.tooltip,closeIcon:"submit",title:u.editor.group.title,body:[s.createElement(o.default,null)],header:[s.createElement("svg",{viewBox:"0 0 20 20"},s.createElement("path",{d:"M16.7,19H1.5l0,0C1,19,1,18.5,1,18.5V4.6H0v13.8C0,19.3,0.7,20,1.5,20h15.2"}),s.createElement("path",{d:"M18.5,16h-14l0,0C4,16,4,15.5,4,15.5V1.6H3v13.8C3,16.3,3.7,17,4.5,17h14"}),s.createElement("path",{d:"M4,14.8V1.5l0,0C4,1,4.5,1,4.5,1H11V0L4.6,0C3.7,0,3,0.7,3,1.5v13.3"}),s.createElement("path",{d:"M19,10.2v5.2l0,0c0,0.5-0.5,0.5-0.5,0.5H7.2v1h11.2c0.9,0,1.6-0.7,1.6-1.5v-5.2"}),s.createElement("path",{d:"M15.5,6.2c-0.7,0-1.2-0.5-1.2-1.2s0.5-1.2,1.2-1.2c0.7,0,1.2,0.5,1.2,1.2S16.2,6.2,15.5,6.2z M15.5,4.6\r c-0.2,0-0.4,0.2-0.4,0.4s0.2,0.4,0.4,0.4s0.4-0.2,0.4-0.4S15.7,4.6,15.5,4.6z"}),s.createElement("path",{d:"M14.3,9.3h-0.1c-0.7-0.2-1.3-0.6-1.8-1c0-0.1-0.1-0.2-0.1-0.3c0-0.1,0.1-0.2,0.2-0.3c0.3-0.2,0.4-0.7,0.2-1S12.2,6.2,12,6.2\r c-0.1,0-0.2,0-0.3,0.1c-0.1,0-0.2,0-0.3,0c-0.2-0.1-0.3-0.2-0.3-0.3C11,5.7,11,5.3,11,5c0-0.3,0-0.7,0.1-1c0-0.1,0.1-0.2,0.2-0.3\r c0.1,0,0.2,0,0.4,0c0.1,0,0.2,0.1,0.3,0.1c0.3,0,0.6-0.2,0.7-0.4c0.2-0.3,0.1-0.8-0.2-1c-0.1-0.1-0.2-0.3-0.2-0.4\r c0-0.1,0-0.2,0.1-0.3c0.5-0.5,1.1-0.8,1.7-1c0.1,0,0.2,0,0.3,0c0.1,0,0.2,0.2,0.2,0.3c0.1,0.4,0.5,0.7,0.9,0.7s0.7-0.3,0.8-0.7\r c0-0.1,0.1-0.2,0.2-0.3c0.1,0,0.2,0,0.3,0c0.6,0.2,1.2,0.6,1.7,1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1-0.1,0.2-0.2,0.3\r c-0.3,0.2-0.4,0.7-0.2,1c0.3,0.3,0.5,0.5,0.8,0.5c0.1,0,0.2,0,0.3-0.1c0.1,0,0.2,0,0.3,0c0.1,0.1,0.2,0.2,0.2,0.3\r C19.9,4.3,20,4.7,20,5s0,0.7-0.1,1c0,0.1-0.1,0.2-0.2,0.3c-0.1,0.1-0.2,0.1-0.3,0c-0.2-0.1-0.3-0.1-0.4-0.1c-0.3,0-0.6,0.2-0.7,0.4\r c-0.2,0.4-0.1,0.8,0.2,1.1c0.1,0.1,0.1,0.2,0.2,0.3c0,0.1,0,0.2-0.1,0.3c-0.6,0.4-1.2,0.8-1.8,1c-0.1,0-0.2,0-0.3,0\r c-0.1-0.1-0.2-0.2-0.2-0.3c-0.1-0.4-0.4-0.7-0.8-0.7S14.7,8.6,14.7,9c0,0.1-0.1,0.2-0.2,0.3C14.4,9.3,14.4,9.3,14.3,9.3L14.3,9.3z\r M13.3,8c0.2,0.1,0.5,0.3,0.7,0.4c0.1-0.2,0.2-0.4,0.4-0.5c0.3-0.3,0.7-0.4,1.1-0.4s0.8,0.1,1.1,0.4C16.7,8,16.9,8.2,17,8.4\r c0.3-0.1,0.5-0.2,0.7-0.4c-0.2-0.2-0.2-0.4-0.3-0.6c-0.1-0.4,0-0.8,0.2-1.1c0.3-0.6,0.8-0.9,1.4-0.9h0.1c0-0.1,0-0.3,0-0.4\r s0-0.3,0-0.4H19c-0.6,0-1.1-0.3-1.4-0.8c-0.2-0.4-0.3-0.8-0.2-1.1c0-0.2,0.1-0.4,0.2-0.6c-0.2-0.2-0.4-0.4-0.6-0.5\r c-0.1,0.2-0.3,0.4-0.4,0.6c-0.3,0.2-0.7,0.4-1.1,0.4s-0.8-0.2-1.1-0.4C14.2,2,14.1,1.8,14,1.6c-0.2,0.1-0.5,0.3-0.7,0.5\r c0.1,0.1,0.2,0.3,0.3,0.6c0.1,0.4,0,0.8-0.2,1.1c-0.3,0.5-0.9,0.8-1.4,0.8h-0.1c0,0.1,0,0.3,0,0.4s0,0.3,0,0.4H12\r c0.6,0,1.1,0.3,1.4,0.8c0.2,0.3,0.3,0.7,0.2,1.1C13.5,7.6,13.4,7.8,13.3,8L13.3,8z"})),s.createElement("span",null,u.editor.group.header)],onSubmit:i,width:400,excerpt:r.validGallery,height:180};t.default=h},function(e,t){"use strict";function n(e){if(!e)return!1;var t=novi.plugins.settings.get("novi-plugin-light-gallery").albumQuerySelector;return e.matches(t)}function i(e){if(!e)return!1;var t=novi.plugins.settings.get("novi-plugin-light-gallery").albumQuerySelector,n=novi.plugins.settings.get("novi-plugin-light-gallery").groupQuerySelector,i=e.matches(t),l=e.matches(n);return i||l}function l(e,t){if(t)return!0;var n=novi.plugins.settings.get("novi-plugin-light-gallery").childQuerySelector;return e.matches(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.validAlbum=n,t.validGallery=i,t.validItem=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=novi.ui.inputNumber,o=novi.react.React,s=novi.react.Component,c=novi.ui.switcher,u=novi.ui.select,h=novi.language,m=function(e){function t(e){n(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r="true"===novi.element.getAttribute(e.element,"data-lg-loop"),a="true"===novi.element.getAttribute(e.element,"data-lg-thumbnail"),o="true"===novi.element.getAttribute(e.element,"data-lg-autoplay"),s=parseInt(novi.element.getAttribute(e.element,"data-lg-autoplay-delay"))/1e3||5,c=novi.element.getAttribute(e.element,"data-lg-animation"),u=c?{label:c,value:c}:{label:"lg-slide",value:"lg-slide"};return o||novi.editor.setBodyHeight(140),l.state={loop:r,thumbnail:a,autoplay:o,autoplayTime:s,animation:u,initValue:{loop:r,thumbnail:a,autoplay:o,autoplayTime:s,animation:u},element:e.element},l.style="\n        .lightgallery-group{\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n        }\n        .lightgallery-group-switcher{\n            display: flex;\n            flex-direction: row;\n            justify-content: space-between;\n            align-items: center;\n            margin-top: 16px;\n            -webkit-transition: 0.1s all cubic-bezier(0.4, 0, 1, 1); \n            transition: 0.1s all cubic-bezier(0.4, 0, 1, 1);\n            backface-visibility: hidden;\n            \n        }\n        .lightgallery-group > .lightgallery-group-switcher{\n        max-width: 33%;\n        }\n        .lightgallery-group-switcher.disabled{\n                opacity: 0;\n                visibility: hidden;\n                height: 0;\n                margin-top: 0;\n        }\n        .lightgallery-group-switcher + .lightgallery-group-switcher{\n            margin-left: 10px;\n        }\n        .lightgallery-group-switcher .novi-label{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n        .lightgallery-group-switcher .novi-switcher{\n            flex-shrink: 0;\n        }\n        .lightgallery-group-switcher .novi-input{\n            width: 55px;\n        }  \n        \n        .lightgallery-group-wrap .Select-menu-outer, .lightgallery-group-wrap .Select-menu{\n            max-height: 110px;\n        }\n        ",l.animations=[{label:"lg-slide",value:"lg-slide"},{label:"lg-fade",value:"lg-fade"},{label:"lg-zoom-in",value:"lg-zoom-in"},{label:"lg-zoom-in-big",value:"lg-zoom-in-big"},{label:"lg-zoom-out",value:"lg-zoom-out"},{label:"lg-zoom-out-big",value:"lg-zoom-out-big"},{label:"lg-zoom-out-in",value:"lg-zoom-out-in"},{label:"lg-zoom-in-out",value:"lg-zoom-in-out"},{label:"lg-soft-zoom",value:"lg-soft-zoom"},{label:"lg-scale-up",value:"lg-scale-up"},{label:"lg-slide-circular",value:"lg-slide-circular"},{label:"lg-slide-circular-vertical",value:"lg-slide-circular-vertical"},{label:"lg-slide-vertical",value:"lg-slide-vertical"},{label:"lg-slide-vertical-growth",value:"lg-slide-vertical-growth"},{label:"lg-slide-skew-only",value:"lg-slide-skew-only"},{label:"lg-slide-skew-only-rev",value:"lg-slide-skew-only-rev"},{label:"lg-slide-skew-only-y",value:"lg-slide-skew-only-y"},{label:"lg-slide-skew-only-y-rev",value:"lg-slide-skew-only-y-rev"},{label:"lg-slide-skew",value:"lg-slide-skew"},{label:"lg-slide-skew-rev",value:"lg-slide-skew-rev"},{label:"lg-slide-skew-cross",value:"lg-slide-skew-cross"},{label:"lg-slide-skew-cross-rev",value:"lg-slide-skew-cross-rev"},{label:"lg-slide-skew-ver",value:"lg-slide-skew-ver"},{label:"lg-slide-skew-ver-rev",value:"lg-slide-skew-ver-rev"},{label:"lg-slide-skew-ver-cross",value:"lg-slide-skew-ver-cross"},{label:"lg-slide-skew-ver-cross-rev",value:"lg-slide-skew-ver-cross-rev"},{label:"lg-lollipop",value:"lg-lollipop"},{label:"lg-lollipop-rev",value:"lg-lollipop-rev"},{label:"lg-rotate",value:"lg-rotate"},{label:"lg-rotate-rev",value:"lg-rotate-rev"},{label:"lg-tube",value:"lg-tube"}],l._handleAutoplayChange=l._handleAutoplayChange.bind(l),l._handleAnimationChange=l._handleAnimationChange.bind(l),l._renderAutoplayDelay=l._renderAutoplayDelay.bind(l),l.messages=h.getDataByKey("novi-plugin-light-gallery"),l}return l(t,e),r(t,[{key:"render",value:function(){return o.createElement("div",{className:"lightgallery-group-wrap",style:{padding:"0 12px",display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",color:"#6E778A"}},o.createElement("style",null,this.style),o.createElement("p",{className:"novi-label",style:{marginTop:"0"}},this.messages.editor.group.body.animation),o.createElement(u,{searchable:!1,options:this.animations,value:this.state.animation,onChange:this._handleAnimationChange}),o.createElement("div",{className:"lightgallery-group"},o.createElement("div",{className:"lightgallery-group-switcher"},o.createElement("p",{className:"novi-label",style:{margin:0,paddingRight:"4px"}},this.messages.editor.group.body.thumbnails),o.createElement(c,{isActive:this.state.thumbnail,onChange:this._handleSwitcherChange.bind(this,"thumbnail")})),o.createElement("div",{className:"lightgallery-group-switcher"},o.createElement("p",{className:"novi-label",style:{margin:0,paddingRight:"4px"}},this.messages.editor.group.body.loop),o.createElement(c,{isActive:this.state.loop,onChange:this._handleSwitcherChange.bind(this,"loop")})),o.createElement("div",{className:"lightgallery-group-switcher"},o.createElement("p",{className:"novi-label",style:{margin:0,paddingRight:"4px"}},this.messages.editor.group.body.autoplay),o.createElement(c,{isActive:this.state.autoplay,onChange:this._handleSwitcherChange.bind(this,"autoplay")}))),this._renderAutoplayDelay())}},{key:"_handleAutoplayChange",value:function(e){this.setState({autoplayTime:e})}},{key:"_handleSwitcherChange",value:function(e,t){var n=Object.assign({},this.state);n[e]=t,"autoplay"===e&&(t?novi.editor.setBodyHeight(180):novi.editor.setBodyHeight(140)),this.setState(n)}},{key:"_handleAnimationChange",value:function(e){this.setState({animation:e})}},{key:"_renderAutoplayDelay",value:function(){var e=this.state.autoplay?"lightgallery-group-switcher":"lightgallery-group-switcher disabled";return o.createElement("div",{className:e},o.createElement("p",{className:"novi-label",style:{margin:0}},this.messages.editor.group.body.autoplayDelay),o.createElement("div",{style:{width:"80px"}},o.createElement(a,{onChange:this._handleAutoplayChange,value:this.state.autoplayTime,min:0})))}}]),t}(s);t.default=m},function(e,t,n){"use strict";function i(e,t){var n=t[0],i={link:n.link,caption:n.caption,type:n.type};if(!u.isEqual(i,n.initData)){if(n.initData.link!==n.link){if(n.initData.type!==n.type){if("url"===n.initData.type&&novi.element.removeAttribute(n.childElement,"data-iframe"),"url"===n.type&&novi.element.setAttribute(n.childElement,"data-iframe","true"),"video"===n.initData.type&&n.videoElement&&(novi.element.remove(n.videoElement.parentElement),novi.element.removeAttribute(n.childElement,"data-html")),"video"===n.type){for(var l=novi.element.getStaticReference(n.childElement),r=l.ownerDocument,a=1,o="novi-lg-video-"+a;null!=r.getElementById(o);)a++,o="novi-lg-video-"+a;var s=r.createElement("div");s.setAttribute("id",o),s.style.display="none",s.innerHTML='\n                      <video class="lg-video-object lg-html5" controls preload="none" src="'+n.link+'">\n                        Your browser does not support HTML5 video.\n                      </video>',r.body.append(s),novi.element.setAttribute(n.childElement,"data-html","#"+o),novi.element.removeAttribute(n.childElement,"data-src"),novi.element.removeAttribute(n.childElement,"href")}}else if("video"===n.type){var c=n.videoElement.querySelectorAll("source");if(c.length)for(var h=0;h<c.length;h++)novi.element.remove(c[h]);novi.element.setAttribute(n.videoElement,"src",n.link)}"video"!==n.type&&("A"===n.childElement.tagName&&n.childElement.hasAttribute("href")?novi.element.setAttribute(n.childElement,"href",n.link):novi.element.setAttribute(n.childElement,"data-src",n.link))}if(n.initData.caption!==n.caption)if(n.captionElement){var m=novi.element.getStaticReference(n.captionElement);m.innerHTML=n.caption}else novi.element.setAttribute(n.childElement,"data-sub-html",n.caption);novi.page.forceUpdate()}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(5),r=function(e){return e&&e.__esModule?e:{default:e}}(l),a=n(2),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=novi.react.React,c=(novi.ui.icons,novi.ui.icon),u=novi.utils.lodash,h=novi.language.getDataByKey("novi-plugin-light-gallery"),m={trigger:s.createElement(c,null,s.createElement("svg",{viewBox:"0 0 20 20"},s.createElement("path",{d:"M13.5,9C12.1,9,11,7.9,11,6.5S12.1,4,13.5,4S16,5.1,16,6.5S14.9,9,13.5,9z M13.5,5C12.7,5,12,5.7,12,6.5S12.7,8,13.5,8\r S15,7.3,15,6.5S14.3,5,13.5,5z"}),s.createElement("path",{d:"M8.5,1h10C18.8,1,19,1.2,19,1.5v17l0,0c0,0.3-0.2,0.5-0.5,0.5h-2.8l-9-8.6C6.4,10.2,6,10,5.6,10s-0.8,0.2-1,0.5L1,14.3V9\r C0.8,9,0.2,9,0,9v9.5C0,19.3,0.7,20,1.5,20h17c0.8,0,1.5-0.7,1.5-1.5v-17C20,0.7,19.3,0,18.5,0h-10 M1.5,19C1.2,19,1,18.8,1,18.5\r l0,0v-2.7l4.3-4.6C5.4,11.1,5.5,11,5.6,11s0.2,0,0.3,0.1l8.4,7.9H1.5z"}),s.createElement("path",{d:"M4.5,5.5C3.8,5.5,3.3,5,3.3,4.3s0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2S5.2,5.5,4.5,5.5z M4.5,3.9c-0.2,0-0.4,0.2-0.4,0.4\r s0.2,0.4,0.4,0.4s0.4-0.2,0.4-0.4S4.7,3.9,4.5,3.9z"}),s.createElement("path",{d:"M3.3,8.6c0,0-0.1,0-0.1,0C2.5,8.4,1.9,8,1.4,7.6C1.4,7.5,1.3,7.4,1.3,7.3c0-0.1,0.1-0.2,0.2-0.3c0.3-0.2,0.4-0.7,0.2-1\r C1.5,5.7,1.2,5.5,1,5.5c-0.1,0-0.2,0-0.3,0.1c-0.1,0-0.2,0-0.3,0C0.2,5.5,0.1,5.4,0.1,5.3C0,5,0,4.6,0,4.3c0-0.3,0-0.7,0.1-1\r c0-0.1,0.1-0.2,0.2-0.3C0.4,3,0.5,3,0.7,3c0.1,0,0.2,0.1,0.3,0.1c0.3,0,0.6-0.2,0.7-0.4c0.2-0.3,0.1-0.8-0.2-1\r C1.4,1.6,1.3,1.4,1.3,1.3c0-0.1,0-0.2,0.1-0.3c0.5-0.5,1.1-0.8,1.7-1c0.1,0,0.2,0,0.3,0s0.2,0.2,0.2,0.3C3.7,0.7,4.1,1,4.5,1\r s0.7-0.3,0.8-0.7c0-0.1,0.1-0.2,0.2-0.3C5.6,0,5.7,0,5.8,0C6.4,0.2,7,0.6,7.5,1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1-0.1,0.2-0.2,0.3\r c-0.3,0.2-0.4,0.7-0.2,1C7.5,2.9,7.7,3.1,8,3.1c0.1,0,0.2,0,0.3-0.1c0.1,0,0.2,0,0.3,0c0.1,0.1,0.2,0.2,0.2,0.3C8.9,3.6,9,4,9,4.3\r c0,0.3,0,0.7-0.1,1c0,0.1-0.1,0.2-0.2,0.3c-0.1,0.1-0.2,0.1-0.3,0C8.2,5.5,8.1,5.5,8,5.5c-0.3,0-0.6,0.2-0.7,0.4\r C7.1,6.3,7.2,6.7,7.5,7c0.1,0.1,0.1,0.2,0.2,0.3c0,0.1,0,0.2-0.1,0.3C7,8,6.4,8.4,5.8,8.6c-0.1,0-0.2,0-0.3,0\r C5.4,8.5,5.3,8.4,5.3,8.3C5.2,7.9,4.9,7.6,4.5,7.6S3.7,7.9,3.7,8.3c0,0.1-0.1,0.2-0.2,0.3C3.4,8.6,3.4,8.6,3.3,8.6L3.3,8.6z\r M2.3,7.3C2.5,7.4,2.8,7.6,3,7.7c0.1-0.2,0.2-0.4,0.4-0.5c0.3-0.3,0.7-0.4,1.1-0.4s0.8,0.1,1.1,0.4C5.7,7.3,5.9,7.5,6,7.7\r c0.3-0.1,0.5-0.2,0.7-0.4C6.5,7.1,6.5,6.9,6.4,6.7c-0.1-0.4,0-0.8,0.2-1.1C6.9,5,7.4,4.7,8,4.7c0,0,0.1,0,0.1,0c0-0.1,0-0.3,0-0.4\r s0-0.3,0-0.4c0,0-0.1,0-0.1,0c-0.6,0-1.1-0.3-1.4-0.8C6.4,2.7,6.3,2.3,6.4,2c0-0.2,0.1-0.4,0.2-0.6C6.4,1.2,6.2,1,6,0.9\r C5.9,1.1,5.7,1.3,5.6,1.5C5.3,1.7,4.9,1.9,4.5,1.9S3.7,1.7,3.4,1.5C3.2,1.3,3.1,1.1,3,0.9C2.8,1,2.5,1.2,2.3,1.4\r C2.4,1.5,2.5,1.7,2.6,2c0.1,0.4,0,0.8-0.2,1.1C2.1,3.6,1.5,3.9,1,3.9c0,0-0.1,0-0.1,0c0,0.1,0,0.3,0,0.4s0,0.3,0,0.4\r c0,0,0.1,0,0.1,0c0.6,0,1.1,0.3,1.4,0.8c0.2,0.3,0.3,0.7,0.2,1.1C2.5,6.9,2.4,7.1,2.3,7.3L2.3,7.3z"}))),header:[s.createElement(c,null,s.createElement("svg",{viewBox:"0 0 20 20"},s.createElement("path",{d:"M13.5,9C12.1,9,11,7.9,11,6.5S12.1,4,13.5,4S16,5.1,16,6.5S14.9,9,13.5,9z M13.5,5C12.7,5,12,5.7,12,6.5S12.7,8,13.5,8\r S15,7.3,15,6.5S14.3,5,13.5,5z"}),s.createElement("path",{d:"M8.5,1h10C18.8,1,19,1.2,19,1.5v17l0,0c0,0.3-0.2,0.5-0.5,0.5h-2.8l-9-8.6C6.4,10.2,6,10,5.6,10s-0.8,0.2-1,0.5L1,14.3V9\r C0.8,9,0.2,9,0,9v9.5C0,19.3,0.7,20,1.5,20h17c0.8,0,1.5-0.7,1.5-1.5v-17C20,0.7,19.3,0,18.5,0h-10 M1.5,19C1.2,19,1,18.8,1,18.5\r l0,0v-2.7l4.3-4.6C5.4,11.1,5.5,11,5.6,11s0.2,0,0.3,0.1l8.4,7.9H1.5z"}),s.createElement("path",{d:"M4.5,5.5C3.8,5.5,3.3,5,3.3,4.3s0.5-1.2,1.2-1.2s1.2,0.5,1.2,1.2S5.2,5.5,4.5,5.5z M4.5,3.9c-0.2,0-0.4,0.2-0.4,0.4\r s0.2,0.4,0.4,0.4s0.4-0.2,0.4-0.4S4.7,3.9,4.5,3.9z"}),s.createElement("path",{d:"M3.3,8.6c0,0-0.1,0-0.1,0C2.5,8.4,1.9,8,1.4,7.6C1.4,7.5,1.3,7.4,1.3,7.3c0-0.1,0.1-0.2,0.2-0.3c0.3-0.2,0.4-0.7,0.2-1\r C1.5,5.7,1.2,5.5,1,5.5c-0.1,0-0.2,0-0.3,0.1c-0.1,0-0.2,0-0.3,0C0.2,5.5,0.1,5.4,0.1,5.3C0,5,0,4.6,0,4.3c0-0.3,0-0.7,0.1-1\r c0-0.1,0.1-0.2,0.2-0.3C0.4,3,0.5,3,0.7,3c0.1,0,0.2,0.1,0.3,0.1c0.3,0,0.6-0.2,0.7-0.4c0.2-0.3,0.1-0.8-0.2-1\r C1.4,1.6,1.3,1.4,1.3,1.3c0-0.1,0-0.2,0.1-0.3c0.5-0.5,1.1-0.8,1.7-1c0.1,0,0.2,0,0.3,0s0.2,0.2,0.2,0.3C3.7,0.7,4.1,1,4.5,1\r s0.7-0.3,0.8-0.7c0-0.1,0.1-0.2,0.2-0.3C5.6,0,5.7,0,5.8,0C6.4,0.2,7,0.6,7.5,1c0.1,0.1,0.1,0.2,0.1,0.3c0,0.1-0.1,0.2-0.2,0.3\r c-0.3,0.2-0.4,0.7-0.2,1C7.5,2.9,7.7,3.1,8,3.1c0.1,0,0.2,0,0.3-0.1c0.1,0,0.2,0,0.3,0c0.1,0.1,0.2,0.2,0.2,0.3C8.9,3.6,9,4,9,4.3\r c0,0.3,0,0.7-0.1,1c0,0.1-0.1,0.2-0.2,0.3c-0.1,0.1-0.2,0.1-0.3,0C8.2,5.5,8.1,5.5,8,5.5c-0.3,0-0.6,0.2-0.7,0.4\r C7.1,6.3,7.2,6.7,7.5,7c0.1,0.1,0.1,0.2,0.2,0.3c0,0.1,0,0.2-0.1,0.3C7,8,6.4,8.4,5.8,8.6c-0.1,0-0.2,0-0.3,0\r C5.4,8.5,5.3,8.4,5.3,8.3C5.2,7.9,4.9,7.6,4.5,7.6S3.7,7.9,3.7,8.3c0,0.1-0.1,0.2-0.2,0.3C3.4,8.6,3.4,8.6,3.3,8.6L3.3,8.6z\r M2.3,7.3C2.5,7.4,2.8,7.6,3,7.7c0.1-0.2,0.2-0.4,0.4-0.5c0.3-0.3,0.7-0.4,1.1-0.4s0.8,0.1,1.1,0.4C5.7,7.3,5.9,7.5,6,7.7\r c0.3-0.1,0.5-0.2,0.7-0.4C6.5,7.1,6.5,6.9,6.4,6.7c-0.1-0.4,0-0.8,0.2-1.1C6.9,5,7.4,4.7,8,4.7c0,0,0.1,0,0.1,0c0-0.1,0-0.3,0-0.4\r s0-0.3,0-0.4c0,0-0.1,0-0.1,0c-0.6,0-1.1-0.3-1.4-0.8C6.4,2.7,6.3,2.3,6.4,2c0-0.2,0.1-0.4,0.2-0.6C6.4,1.2,6.2,1,6,0.9\r C5.9,1.1,5.7,1.3,5.6,1.5C5.3,1.7,4.9,1.9,4.5,1.9S3.7,1.7,3.4,1.5C3.2,1.3,3.1,1.1,3,0.9C2.8,1,2.5,1.2,2.3,1.4\r C2.4,1.5,2.5,1.7,2.6,2c0.1,0.4,0,0.8-0.2,1.1C2.1,3.6,1.5,3.9,1,3.9c0,0-0.1,0-0.1,0c0,0.1,0,0.3,0,0.4s0,0.3,0,0.4\r c0,0,0.1,0,0.1,0c0.6,0,1.1,0.3,1.4,0.8c0.2,0.3,0.3,0.7,0.2,1.1C2.5,6.9,2.4,7.1,2.3,7.3L2.3,7.3z"}))),s.createElement("span",null,h.editor.item.header)],body:[s.createElement(r.default,null)],tooltip:h.editor.item.tooltip,closeIcon:"submit",title:h.editor.item.title,width:400,height:240,onSubmit:i,excerpt:o.validItem,highlightChild:!0};t.default=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),s=function(e){return e&&e.__esModule?e:{default:e}}(o),c=n(7),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),h=novi.react.React,m=novi.react.Component,p=function(e){function t(e){i(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r="",a="",o=void 0,s=void 0,c=e.childElement,h=novi.plugins.settings.get("novi-plugin-light-gallery");!c&&e.element.matches(h.childQuerySelector)&&(c=e.element);var m=e.element.ownerDocument.head.querySelector("base");if(n.dir=m.getAttribute("href"),"A"===c.tagName&&c.hasAttribute("href"))r=novi.element.getAttribute(c,"href");else if(c.hasAttribute("data-src"))r=novi.element.getAttribute(c,"data-src");else if(c.hasAttribute("data-html")){var p=novi.element.getAttribute(c,"data-html");try{s=c.ownerDocument.querySelector(p+" video")}catch(e){s=null}if(s)if(s.hasAttribute("src"))r=s.getAttribute("src");else{var g=s.querySelector("source");g&&(r=g.getAttribute("src"))}}if(c.hasAttribute("data-sub-html")){var d=c.getAttribute("data-sub-html"),v=!0;try{c.matches(d)}catch(e){v=!1}if(v){var y=void 0;y="true"===e.element.getAttribute("data-sub-html-relative")?c.querySelector(d):c.ownerDocument.querySelector(d),y?(o=y,y=novi.element.getStaticReference(y),a=y.innerHTML):a=d}else a=d}n.onItemChange=n.onItemChange.bind(n);var b=u.getLinkType(r);return n.state={element:e.element,childElement:c,type:b.type,videoId:b.id,videoElement:s,captionElement:o,link:r,caption:a,initData:{link:r,caption:a,type:b.type}},n}return r(t,e),a(t,[{key:"render",value:function(){return h.createElement("div",{className:"lg-wrap",style:{padding:"0 12px",display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",color:"#6E778A"}},h.createElement(s.default,{src:this.state.link,caption:this.state.caption,type:this.state.type,videoId:this.state.videoId,onChange:this.onItemChange,relativeDir:this.dir}))}},{key:"onItemChange",value:function(e){this.setState({link:e.src,caption:e.caption,type:e.type})}}]),t}(m);t.default=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(7),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),c=novi.react.React,u=novi.react.Component,h=novi.ui.input,m=novi.ui.codeEditor,p=(novi.ui.button,novi.ui.icon,novi.types),g=novi.utils.axios,d=novi.ui.link,v=novi.language,y=function(e){function t(e){i(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=/[^\s]+\.(svg|jpeg|jpg|gif|png)\s*$/.test(e.thumb);return n.state={src:e.src,caption:e.caption||"",preview:e.src&&!!e.src.length,thumbPreview:e.thumb&&!!e.thumb.length&&r,thumbInput:!e.thumb||!!e.thumb.length<1||r,type:e.type,thumb:e.thumb,thumbnail:e.thumbnail||!1},e.thumbnail&&novi.editor.setBodyHeight(350),n.typeTimer=null,n.videoId=e.videoId,n.onCaptionChange=n.onCaptionChange.bind(n),n.onChooseImage=n.onChooseImage.bind(n),n.onCodeEditorInit=n.onCodeEditorInit.bind(n),n.openMediaLibrary=n.openMediaLibrary.bind(n),n.openThumbMediaLibrary=n.openThumbMediaLibrary.bind(n),n.onEditorFocus=n.onEditorFocus.bind(n),n.onEditorBlur=n.onEditorBlur.bind(n),n.onSrcChange=n.onSrcChange.bind(n),n.setNewType=n.setNewType.bind(n),n._renderReturnButton=n._renderReturnButton.bind(n),n.onThumbChange=n.onThumbChange.bind(n),n.onThumbChooseImage=n.onThumbChooseImage.bind(n),n.onBackClick=n.onBackClick.bind(n),n.style="\n            .lg-item-wrap .code-editor{\n                height: 100px;\n            }\n            .lg-item-wrap .link-primary{\n                display: inline-block;\n            }\n            .input-wrap{\n                position: relative;\n            }\n            .input-wrap input{\n                padding-right: 40px;\n            }\n            .lg-preview-button{\n                position: absolute;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                width: 40px;\n                text-align: center;\n                cursor: pointer;\n            }\n            .input-wrap.disabled input {\n                border-color: red;\n                \n            }\n            .lg-preview-button.disabled{\n                pointer-events: none;\n                opacity: 0.5; \n            }\n            \n            .lg-preview-button svg{\n                width: 20px;\n                height: 30px;\n                fill: #fff; \n            }\n            .lg-item-wrap-back{\n                display: flex;\n                align-items: flex-start;\n                margin-top: 10px;\n                justify-content: flex-end;\n            }\n            .lg-item-wrap-back svg{\n                width: 12px; \n                padding-right: 5px;\n                position: relative;\n                top: 1px;\n            }\n        ",n.messages=v.getDataByKey("novi-plugin-light-gallery"),n}return r(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({src:e.src,caption:e.caption,thumbnail:e.thumbnail||!1})}},{key:"componentWillUnmount",value:function(){this.editor&&(this.editor.removeEventListener("focus",this.onEditorFocus),this.editor.removeEventListener("blur",this.onEditorBlur),this.editor.removeEventListener("change",this.onCaptionChange))}},{key:"render",value:function(){var e=this.state.preview?"lg-preview-button":"lg-preview-button disabled";return c.createElement("div",{className:"lg-item-wrap"},c.createElement("style",null,this.style),c.createElement("div",{className:"input-wrap-group"},c.createElement("p",{className:"novi-label",style:{marginTop:0}},this.messages.editor.item.body.src),c.createElement("div",{className:"input-wrap"},c.createElement(h,{value:this.state.src,onChange:this.onSrcChange}),c.createElement("div",{className:e,onClick:this.openPreview.bind(this,this.state.src),"data-for":"tooltip-global","data-tip":this.messages.editor.item.linkPreviewTooltip},c.createElement("svg",{viewBox:"0 0 20 20"},c.createElement("path",{d:"M19.872 10.166c-0.047-0.053-1.182-1.305-2.956-2.572-1.047-0.748-2.1-1.344-3.13-1.773-1.305-0.544-2.579-0.82-3.786-0.82s-2.481 0.276-3.786 0.82c-1.030 0.429-2.083 1.026-3.13 1.773-1.774 1.267-2.909 2.52-2.956 2.572-0.171 0.19-0.171 0.479 0 0.669 0.047 0.053 1.182 1.305 2.956 2.572 1.047 0.748 2.1 1.344 3.13 1.773 1.305 0.544 2.579 0.82 3.786 0.82s2.481-0.276 3.786-0.82c1.030-0.429 2.083-1.026 3.13-1.773 1.774-1.267 2.909-2.52 2.956-2.572 0.171-0.19 0.171-0.479 0-0.669zM12.574 6.438c0.907 0.763 1.426 1.873 1.426 3.062 0 2.206-1.794 4-4 4s-4-1.794-4-4c0-1.188 0.519-2.299 1.426-3.062 0.822-0.268 1.691-0.438 2.574-0.438s1.752 0.17 2.574 0.438zM16.317 12.606c-1.533 1.092-3.873 2.394-6.317 2.394s-4.784-1.302-6.317-2.394c-1.157-0.824-2.042-1.658-2.489-2.106 0.447-0.448 1.332-1.281 2.489-2.106 0.53-0.378 1.156-0.78 1.85-1.145-0.347 0.688-0.533 1.455-0.533 2.251 0 2.757 2.243 5 5 5s5-2.243 5-5c0-0.796-0.186-1.563-0.533-2.251 0.694 0.365 1.32 0.768 1.85 1.145 1.157 0.824 2.042 1.658 2.489 2.106-0.447 0.448-1.332 1.281-2.489 2.106z"})))),c.createElement("div",{style:{textAlign:"right",marginTop:5}},c.createElement(d,{type:"primary",onClick:this.openMediaLibrary},this.messages.editor.item.body.openLibrary))),this._renderThumbnail(),c.createElement("p",{className:"novi-label",style:{marginTop:10}},this.messages.editor.item.body.description),c.createElement(m,{mode:"html",onInit:this.onCodeEditorInit}),this._renderReturnButton())}},{key:"onCodeEditorInit",value:function(e){this.editor=e,this.editor.addEventListener("change",this.onCaptionChange),this.editor.addEventListener("focus",this.onEditorFocus),this.editor.addEventListener("blur",this.onEditorBlur),this.silent=!0,this.editor.setValue(novi.utils.beautifyHTML(this.state.caption),1),this.silent=!1}},{key:"onEditorFocus",value:function(){this.focused=!0}},{key:"onEditorBlur",value:function(){this.focused=!1}},{key:"onCaptionChange",value:function(){if(!this.silent&&this.focused){var e=this.state;e.caption=this.editor.getValue(),this.setState(e),this.props.onChange&&this.props.onChange(this.buildChangeData(e))}}},{key:"onSrcChange",value:function(e){var t=this;clearTimeout(this.typeTimer);var n=this.state;n.src=e.target.value,n.preview=!1,this.setState(n),this.props.onChange&&this.props.onChange(this.buildChangeData(n)),this.typeTimer=setTimeout(function(){t.setNewType(n)},1e3)}},{key:"openMediaLibrary",value:function(){var e={onSubmit:this.onChooseImage};novi.media.choose(e)}},{key:"onChooseImage",value:function(e){var t=this.state;t.src=e,this.setState(t),this.setNewType(t)}},{key:"buildChangeData",value:function(e){return{src:e.src,caption:e.caption,type:e.type,thumb:e.thumb}}},{key:"openPreview",value:function(e){var t=new String;if(t=t.concat(e),novi.utils.isRelativeURL(t)&&(t=novi.utils.getAbsolutePath(this.props.relativeDir+t)),"url"===this.state.type)return window.open(t,"_blank");"youtube"===this.state.type||"vimeo"===this.state.type?novi.modal.linkPreview({type:this.state.type,link:this.videoId}):novi.modal.linkPreview({type:this.state.type,link:t})}},{key:"setNewType",value:function(e){var t=this,n=s.getLinkType(e.src);"youtube"!==n.type&&"vimeo"!==n.type||null==n.id||(this.videoId=n.id),e.preview=e.src.length>0,e.type=n.type,"vimeo"===n.type&&null==n.id?g.get("https://vimeo.com/api/oembed.json?url="+e.src).then(function(n){if(n&&n.data){var i="http://vimeo.com/"+n.data.video_id;t.videoId=n.data.video_id,e.src=i,t.setState(e),t.props.onChange&&t.props.onChange(t.buildChangeData(e))}}):(this.setState(e),this.props.onChange&&this.props.onChange(this.buildChangeData(e)))}},{key:"_renderReturnButton",value:function(){return this.props.onReturn?c.createElement("div",{className:"lg-item-wrap-back"},c.createElement("svg",{viewBox:"0 0 20 20"},c.createElement("path",{d:"M0.646 10.146l6-6c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-5.146 5.146h16.293c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5h-16.293l5.146 5.146c0.195 0.195 0.195 0.512 0 0.707-0.098 0.098-0.226 0.146-0.354 0.146s-0.256-0.049-0.354-0.146l-6-6c-0.195-0.195-0.195-0.512 0-0.707z",stroke:"#109DF7",strokeWidth:"2"})),c.createElement(d,{type:"primary",onClick:this.onBackClick},this.messages.editor.item.body.backToAlbum)):null}},{key:"onBackClick",value:function(){novi.editor.setBodyHeight(300),this.props.onReturn()}},{key:"_renderThumbnail",value:function(){if(!this.props.thumbnail)return null;var e=this.state.thumbPreview?"lg-preview-button":"lg-preview-button disabled",t=this.state.thumbInput?"input-wrap":"input-wrap disabled";return c.createElement("div",{className:"input-wrap-group",style:{marginTop:10}},c.createElement("p",{className:"novi-label",style:{marginTop:0}},this.messages.editor.item.body.thumb),c.createElement("div",{className:t},c.createElement(h,{value:this.state.thumb,onChange:this.onThumbChange}),c.createElement("div",{className:e,onClick:this.openThumbPreview.bind(this),"data-for":"tooltip-global","data-tip":"Open link preview"},c.createElement("svg",{viewBox:"0 0 20 20"},c.createElement("path",{d:"M19.872 10.166c-0.047-0.053-1.182-1.305-2.956-2.572-1.047-0.748-2.1-1.344-3.13-1.773-1.305-0.544-2.579-0.82-3.786-0.82s-2.481 0.276-3.786 0.82c-1.030 0.429-2.083 1.026-3.13 1.773-1.774 1.267-2.909 2.52-2.956 2.572-0.171 0.19-0.171 0.479 0 0.669 0.047 0.053 1.182 1.305 2.956 2.572 1.047 0.748 2.1 1.344 3.13 1.773 1.305 0.544 2.579 0.82 3.786 0.82s2.481-0.276 3.786-0.82c1.030-0.429 2.083-1.026 3.13-1.773 1.774-1.267 2.909-2.52 2.956-2.572 0.171-0.19 0.171-0.479 0-0.669zM12.574 6.438c0.907 0.763 1.426 1.873 1.426 3.062 0 2.206-1.794 4-4 4s-4-1.794-4-4c0-1.188 0.519-2.299 1.426-3.062 0.822-0.268 1.691-0.438 2.574-0.438s1.752 0.17 2.574 0.438zM16.317 12.606c-1.533 1.092-3.873 2.394-6.317 2.394s-4.784-1.302-6.317-2.394c-1.157-0.824-2.042-1.658-2.489-2.106 0.447-0.448 1.332-1.281 2.489-2.106 0.53-0.378 1.156-0.78 1.85-1.145-0.347 0.688-0.533 1.455-0.533 2.251 0 2.757 2.243 5 5 5s5-2.243 5-5c0-0.796-0.186-1.563-0.533-2.251 0.694 0.365 1.32 0.768 1.85 1.145 1.157 0.824 2.042 1.658 2.489 2.106-0.447 0.448-1.332 1.281-2.489 2.106z"})))),c.createElement("div",{style:{textAlign:"right",marginTop:5}},c.createElement(d,{type:"primary",onClick:this.openThumbMediaLibrary},this.messages.editor.item.body.openLibrary)))}},{key:"onThumbChange",value:function(e){var t=this;clearTimeout(this.typeTimer);var n=this.state;n.thumb=e.target.value,this.setState(n),this.props.onChange&&this.props.onChange(this.buildChangeData(n)),this.typeTimer=setTimeout(function(){var e=t._getThumbPreview(n),i=t._getThumbInputPreview(n);null!==e&&null!==i?t.setState({thumbPreview:e,thumbInput:i}):null!==i?t.setState({thumbInput:i}):null!==e&&t.setState({thumbPreview:e})},300)}},{key:"_getThumbPreview",value:function(e){var t=/[^\s]+\.(svg|jpeg|jpg|gif|png)\s*$/.test(e.thumb);return t!==e.thumbPreview&&e.thumb.length>0?t:null}},{key:"_getThumbInputPreview",value:function(e){var t=/[^\s]+\.(svg|jpeg|jpg|gif|png)\s*$/.test(e.thumb);return e.thumb.length<1&&!e.thumbInput||(t!==e.thumbInput&&e.thumb.length>0?t:null)}},{key:"openThumbMediaLibrary",value:function(){var e={onSubmit:this.onThumbChooseImage,type:p.mediaImage};novi.media.choose(e)}},{key:"onThumbChooseImage",value:function(e){var t=this.state;t.thumb=e,t.thumbPreview=!0,this.setState(t),this.props.onChange&&this.props.onChange(this.buildChangeData(t))}},{key:"openThumbPreview",value:function(){var e=new String;e=e.concat(this.state.thumb),novi.utils.isRelativeURL(e)&&(e=novi.utils.getAbsolutePath(this.props.relativeDir+e)),novi.modal.linkPreview({type:"image",link:e})}}]),t}(u);t.default=y},function(e,t){"use strict";function n(e){var t=void 0;if(!e)return{type:"url",id:null};if(/[^\s]+\.(svg|jpeg|jpg|gif|png)\s*$/.test(e))t="image";else if(/[^\s]+\.(mp4|webm|ogg)\s*$/.test(e))t="video";else{var n=i(e);if(n.type)return n}return void 0===t&&(t="url"),{type:t,id:null}}function i(e){e.match(/(http:\/\/|https:\/\/|)(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);var t=null,n=null;return RegExp.$3.indexOf("youtu")>-1?(t="youtube",n=RegExp.$6):RegExp.$3.indexOf("vimeo")>-1&&(t="vimeo",parseInt(RegExp.$6)&&(n=RegExp.$6)),{type:t,id:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.getLinkType=n},function(e,t,n){"use strict";function i(e,t){var n=t[0],i=!1,l=n.element;if(n.elementsToRemove&&n.elementsToRemove.length){for(var r=0;r<n.elementsToRemove.length;r++)novi.element.remove(n.elementsToRemove[r]);i=!0}if(u.isEqual(n.items,n.initValue.items)){if(i)return novi.page.forceUpdate()}else{i=!0;for(var a=[],o=0;o<n.items.length;o++)if(!u.isEqual(n.items[o],n.initValue.items[o])){var s=n.items[o],c=n.initValue.items[o];if(c&&s.type===c.type){if("video"===s.type){var h=n.element.ownerDocument.querySelector(s.html);if(h){var m=h.querySelectorAll("source");if(m.length)for(var p=0;p<m.length;p++)novi.element.remove(m[p]);novi.element.setAttribute(h,"src",s.src)}}}else{if(c&&"url"===c.type&&delete s.iframe,"url"===s.type&&s.src&&(s.iframe=!0),c&&"video"===c.type){var g=n.element.ownerDocument.querySelector(s.html);g&&(novi.element.remove(g),delete s.html)}if("video"===s.type){for(var d=novi.element.getStaticReference(n.element),v=d.ownerDocument,y=1,b="novi-lg-video-"+y;null!=v.getElementById(b);)y++,b="novi-lg-video-"+y;var f=v.createElement("div");f.setAttribute("id",b),f.style.display="none",f.innerHTML='\n                  <video class="lg-video-object lg-html5" controls preload="none" src="'+s.src+'">\n                    Your browser does not support HTML5 video.\n                  </video>',v.body.append(f),s.html="#"+b,delete s.src}}if(c){if(s.caption!==c.caption)if(s.captionElement){var C=novi.element.getStaticReference(s.captionElement);C.innerHTML=s.caption}else s.subHtml=s.caption}else s.subHtml=s.caption}for(var w=0;w<n.items.length;w++){var E=n.items[w],k={subHtml:E.subHtml,thumb:E.thumb};"video"===E.type?k.html=E.html:k.src=E.src,"url"===E.type&&(k.iframe=!0),a.push(k)}novi.element.setAttribute(l,"data-lg-dynamic-elements",JSON.stringify(a)),i&&novi.page.forceUpdate()}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),a=n(9),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=novi.react.React,c=novi.ui.icons,u=novi.utils.lodash,h=novi.language.getDataByKey("novi-plugin-light-gallery"),m={trigger:c.ICON_PICTURES,tooltip:h.editor.album.tooltip,closeIcon:"submit",title:h.editor.album.title,excerpt:r.validAlbum,body:[s.createElement(o.default,null)],header:[c.ICON_PICTURES,s.createElement("span",null,h.editor.album.header)],onSubmit:i,width:508,height:300};t.default=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(7),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),c=n(6),u=function(e){return e&&e.__esModule?e:{default:e}}(c),h=novi.react.React,m=novi.react.Component,p=novi.ui.link,g=novi.language,d=function(e){function t(e){i(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.formItemData(e.element);n.state={items:r,active:null,elementsToRemove:[],initValue:{items:r},element:e.element};var a=e.element.ownerDocument.head.querySelector("base");return n.dir=a.getAttribute("href"),n.style="\n            .lightgallery-album-add-item{\n                display: flex;\n                align-items: center;\n                height: 35px;\n                justify-content: flex-end;\n                padding: 15px;\n                box-sizing: border-box;\n            }\n            .lightgallery-album-inner{\n                height: calc(100% - 35px);\n                overflow-y: scroll;\n            }\n            .lightgallery-album-inner::-webkit-scrollbar {\n                width: 8px;\n                height: 8px;\n                background: #181D27;\n            }\n            .lightgallery-album-inner::-webkit-scrollbar-thumb {\n                height: 6px;\n                width: 6px;\n                border: 2px solid rgba(0, 0, 0, 0);\n                background-clip: padding-box;\n                -webkit-border-radius: 4px;\n                background-color: #109DF7;\n            }\n            .lightgallery-album-inner::-webkit-scrollbar-button {\n                width: 0;\n                height: 0;\n                display: none;\n            }\n            .lightgallery-album-inner::-webkit-scrollbar-corner {\n                background-color: transparent;\n            }\n            .lightgallery-album{\n                width: 100%;\n                font-size: 0;\n                margin-top: -10px;\n                margin-left: -10px;\n                box-sizing: border-box;\n            }\n            .lightgallery-album-item{ \n                width: 150px;\n                height: 120px;\n                background: #000;\n                display: inline-block;\n                margin-left: 10px;\n                margin-top: 10px;\n                cursor: pointer;\n                position: relative;\n            }\n            .lightgallery-album-item-image{\n                width: 100%;\n                height: 100%;\n                background-size: contain;\n                -webkit-background-size: contain;\n                background-repeat: no-repeat;\n                background-position: center;\n                display: block;\n            }\n            .lightgallery-album-item-fallback-image{\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%;\n                height: 100%;\n            }\n            .lightgallery-album-item-fallback-image svg{\n                width: 50%;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                fill: #1F2532;\n            }\n            .lightgallery-album-item-hover-wrap{\n                position: absolute;\n                left: 0;\n                top: 0;\n                bottom: 0;\n                right: 0;\n                background: rgba(0,0,0,0.5);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                cursor: default;\n                opacity: 0;\n                visibility: hidden;\n                -webkit-transition: 0.15s opacity cubic-bezier(0.4, 0, 1, 1);\n                transition: 0.15s opacity cubic-bezier(0.4, 0, 1, 1);\n            }\n            .lightgallery-album-item-settings{\n                width: 20px;\n                height: 20px;\n                display: block;\n                cursor: pointer;\n            }\n            .lightgallery-album-item-settings svg,\n            .lightgallery-album-item-remove svg{\n                width: 100%;\n                fill: #fff;\n                -webkit-transition: 0.15s fill cubic-bezier(0.4, 0, 1, 1);\n                transition: 0.15s fill cubic-bezier(0.4, 0, 1, 1);\n            }\n            .lightgallery-album-item-settings:hover svg{\n                fill: #109DF7;\n            }\n            .lightgallery-album-item-remove:hover svg{\n                fill: #ce3849;\n            }\n            .lightgallery-album-item-remove{\n                width: 20px;\n                display: block;\n                height: 20px;\n                margin-left: 15px;\n                cursor: pointer;\n            }\n            .lightgallery-album-item:hover .lightgallery-album-item-hover-wrap{\n                visibility: visible;\n                opacity: 1; \n            }\n            \n        ",n._renderGalleryItems=n._renderGalleryItems.bind(n),n._onItemAdd=n._onItemAdd.bind(n),n.messages=g.getDataByKey("novi-plugin-light-gallery"),n}return r(t,e),a(t,[{key:"render",value:function(){return null===this.state.active?h.createElement("div",{className:"lightgallery-album-wrap",style:{height:"100%",boxSizing:"border-box",padding:"15px 3px 0 15px",background:"#181D27"}},h.createElement("style",null,this.style),h.createElement("div",{className:"lightgallery-album-inner"},h.createElement("div",{className:"lightgallery-album"},this._renderGalleryItems())),h.createElement("div",{className:"lightgallery-album-add-item"},h.createElement(p,{type:"primary",onClick:this._onItemAdd},this.messages.editor.album.body.addItem))):this._renderItemSettings()}},{key:"_renderGalleryItems",value:function(){var e=this;return this.state.items.map(function(t,n){if(t.thumb){var i=t.thumb;return novi.utils.isRelativeURL(i)&&(i=e.dir+i),h.createElement("div",{key:""+t.thumb+(new Date).getTime()+"-"+n,className:"lightgallery-album-item"},h.createElement("span",{className:"lightgallery-album-item-image",style:{backgroundImage:'url("'+i+'")'}}),e._renderControls(n))}return e._renderItemByLinkType(t,n)})}},{key:"_renderItemByLinkType",value:function(e,t){switch(s.getLinkType(e.src).type){case"image":var n=e.src;return novi.utils.isRelativeURL(n)&&(n=this.dir+n),h.createElement("div",{key:""+e.src+(new Date).getTime()+"-"+t,className:"lightgallery-album-item"},h.createElement("span",{className:"lightgallery-album-item-image",style:{backgroundImage:'url("'+n+'")'}}),this._renderControls(t));case"video":case"youtube":case"vimeo":return h.createElement("div",{key:""+e.src+(new Date).getTime()+"-"+t,className:"lightgallery-album-item"},h.createElement("span",{className:"lightgallery-album-item-fallback-image"},h.createElement("svg",{viewBox:"0 0 20 20"},h.createElement("path",{d:"M7.5 15c-0.076 0-0.153-0.017-0224-0.053-0.169-0.085-0.276-0.258-0.276-0.447v-9c0-0.189 0.107-0.363 0.276-0.447s0.372-0.066 0.524 0.047l6 4.5c0.126 0.094 0.2 0.243 0.2 0.4s-0.074 0.306-0.2 0.4l-6 4.5c-0.088 0.066-0.194 0.1-0.3 0.1zM8 6.5v7l4.667-3.5-4.667-3.5z"}),h.createElement("path",{d:"M19.5 2h-19c-0.276 0-0.5 0.224-0.5 0.5v15c0 0.276 0.224 0.5 0.5 0.5h19c0.276 0 0.5-0.224 0.5-0.5v-15c0-0.276-0.224-0.5-0.5-0.5zM3 11h-2v-2h2v2zM3 8h-2v-2h2v2zM1 12h2v2h-2v-2zM4 3h12v14h-12v-14zM17 9h2v2h-2v-2zM17 8v-2h2v2h-2zM17 12h2v2h-2v-2zM19 5h-2v-2h2v2zM3 3v2h-2v-2h2zM1 15h2v2h-2v-2zM17 17v-2h2v2h-2z"}))),this._renderControls(t));case"url":return h.createElement("div",{key:""+e.src+(new Date).getTime()+"-"+t,className:"lightgallery-album-item"},h.createElement("span",{className:"lightgallery-album-item-fallback-image"},h.createElement("svg",{viewBox:"0 0 20 20"},h.createElement("path",{d:"M10.682 12.998c-0.943 0-1.886-0.359-2.604-1.077-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0c1.046 1.046 2.747 1.046 3.793 0l3.636-3.636c1.046-1.046 1.046-2.747 0-3.793s-2.747-1.046-3.793 0l-3.068 3.068c-0.195 0.195-0.512 0.195-0.707 0s-0.195-0.512 0-0.707l3.068-3.068c1.436-1.436 3.772-1.436 5.207 0s1.436 3.772 0 5.207l-3.636 3.636c-0.718 0.718-1.661 1.077-2.604 1.077z"}),h.createElement("path",{d:"M4.682 18.998c-0.943 0-1.886-0.359-2.604-1.077-1.436-1.436-1.436-3.772 0-5.207l3.636-3.636c1.436-1.436 3.772-1.436 5.207 0 0.195 0.195 0.195 0.512 0 0.707s-0.512 0.195-0.707 0c-1.046-1.046-2.747-1.046-3.793 0l-3.636 3.636c-1.046 1.046-1.046 2.747 0 3.793s2.747 1.046 3.793 0l3.068-3.068c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-3.068 3.068c-0.718 0.718-1.661 1.077-2.604 1.077z"}))),this._renderControls(t))}}},{key:"_renderControls",value:function(e){return h.createElement("span",{className:"lightgallery-album-item-hover-wrap"},h.createElement("span",{className:"lightgallery-album-item-settings",onClick:this._openItemSettings.bind(this,e)},h.createElement("svg",{viewBox:"0 0 20 20"},h.createElement("path",{d:"M7.631 19.702c-0.041 0-0.083-0.005-0.125-0.016-0.898-0.231-1.761-0.587-2.564-1.059-0.233-0.137-0.315-0.434-0.186-0.671 0.159-0.292 0.243-0.622 0.243-0.957 0-1.103-0.897-2-2-2-0.334 0-0.665 0.084-0.957 0.243-0.237 0.129-0.534 0.047-0.671-0.186-0.472-0.804-0.828-1.666-1.059-2.564-0.065-0.254 0.077-0.515 0.325-0.598 0.814-0.274 1.362-1.036 1.362-1.895s-0.547-1.621-1.362-1.895c-0.248-0.084-0.39-0.344-0.325-0.598 0.231-0.898 0.587-1.761 1.059-2.564 0.137-0.233 0.434-0.315 0.671-0.186 0.291 0.159 0.622 0.243 0.957 0.243 1.103 0 2-0.897 2-2 0-0.334-0.084-0.665-0.243-0.957-0.129-0.237-0.047-0.534 0.186-0.671 0.804-0.472 1.666-0.828 2.564-1.059 0.254-0.065 0.515 0.077 0.598 0.325 0.274 0.814 1.036 1.362 1.895 1.362s1.621-0.547 1.895-1.362c0.084-0.248 0.345-0.39 0.598-0.325 0.898 0.231 1.761 0.587 2.564 1.059 0.233 0.137 0.315 0.434 0.186 0.671-0.159 0.292-0.243 0.622-0.243 0.957 0 1.103 0.897 2 2 2 0.334 0 0.665-0.084 0.957-0.243 0.237-0.129 0.534-0.047 0.671 0.186 0.472 0.804 0.828 1.666 1.059 2.564 0.065 0.254-0.077 0.515-0.325 0.598-0.814 0.274-1.362 1.036-1.362 1.895s0.547 1.621 1.362 1.895c0.248 0.084 0.39 0.344 0.325 0.598-0.231 0.898-0.587 1.761-1.059 2.564-0.137 0.233-0.434 0.315-0.671 0.186-0.292-0.159-0.622-0.243-0.957-0.243-1.103 0-2 0.897-2 2 0 0.334 0.084 0.665 0.243 0.957 0.129 0.237 0.047 0.534-0.186 0.671-0.804 0.472-1.666 0.828-2.564 1.059-0.254 0.065-0.515-0.077-0.598-0.325-0.274-0.814-1.036-1.362-1.895-1.362s-1.621 0.547-1.895 1.362c-0.070 0.207-0.264 0.341-0.474 0.341zM10 17c1.127 0 2.142 0.628 2.655 1.602 0.52-0.161 1.026-0.369 1.51-0.622-0.108-0.314-0.164-0.646-0.164-0.98 0-1.654 1.346-3 3-3 0.334 0 0.666 0.056 0.98 0.164 0.253-0.484 0.462-0.989 0.622-1.51-0.974-0.512-1.602-1.527-1.602-2.655s0.628-2.142 1.602-2.655c-0.161-0.52-0.369-1.026-0.622-1.51-0.314 0.108-0.646 0.164-0.98 0.164-1.654 0-3-1.346-3-3 0-0.334 0.056-0.666 0.164-0.98-0.484-0.253-0.989-0.462-1.51-0.622-0.512 0.974-1.527 1.602-2.655 1.602s-2.142-0.628-2.655-1.602c-0.52 0.16-1.026 0.369-1.51 0.622 0.108 0.314 0.164 0.646 0.164 0.98 0 1.654-1.346 3-3 3-0.334 0-0.666-0.056-0.98-0.164-0.253 0.484-0.462 0.989-0.622 1.51 0.974 0.512 1.602 1.527 1.602 2.655s-0.628 2.142-1.602 2.655c0.16 0.52 0.369 1.026 0.622 1.51 0.314-0.108 0.646-0.164 0.98-0.164 1.654 0 3 1.346 3 3 0 0.334-0.056 0.666-0.164 0.98 0.484 0.253 0.989 0.462 1.51 0.622 0.512-0.974 1.527-1.602 2.655-1.602z"}),h.createElement("path",{d:"M10 13c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3-1.346 3-3 3zM10 8c-1.103 0-2 0.897-2 2s0.897 2 2 2c1.103 0 2-0.897 2-2s-0.897-2-2-2z"}))),h.createElement("span",{className:"lightgallery-album-item-remove",onClick:this._removeItem.bind(this,e)},h.createElement("svg",{viewBox:"0 0 20 20"},h.createElement("path",{d:"M14.332 14.126l-4.080-3.626 4.080-3.626c0.206-0.183 0.225-0.499 0.042-0.706s-0.499-0.225-0.706-0.042l-4.168 3.705-4.168-3.705c-0.206-0.183-0.522-0.165-0.706 0.042s-0.165 0.522 0.042 0.706l4.080 3.626-4.080 3.626c-0.206 0.183-0.225 0.499-0.042 0.706 0.099 0.111 0.236 0.168 0.374 0.168 0.118 0 0.237-0.042 0.332-0.126l4.168-3.705 4.168 3.705c0.095 0.085 0.214 0.126 0.332 0.126 0.138 0 0.275-0.057 0.374-0.168 0.183-0.206 0.165-0.522-0.042-0.706z"}),h.createElement("path",{d:"M9.5 20c-2.538 0-4.923-0.988-6.718-2.782s-2.782-4.18-2.782-6.717c0-2.538 0.988-4.923 2.782-6.718s4.18-2.783 6.718-2.783c2.538 0 4.923 0.988 6.718 2.783s2.782 4.18 2.782 6.718-0.988 4.923-2.782 6.717c-1.794 1.794-4.18 2.782-6.718 2.782zM9.5 2c-4.687 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5-3.813-8.5-8.5-8.5z"}))))}},{key:"_removeItem",value:function(e){var t=this.state.items.slice(),n=this.state.elementsToRemove.slice(),i=this._removeItemHTML(t[e]),l=this._removeItemCaption(t[e]);if(i&&n.push(i),l&&n.push(l),t.length>1)t.splice(e,1);else{var r=Object.assign({},t[0]);r.src="",r.subHtml="",r.type="url",r.thumb="",r.caption="",delete r.html,delete r.iframe,t=[r]}this.setState({items:t,elementsToRemove:n})}},{key:"_onItemAdd",value:function(){var e=this.state.items.slice();e.push({src:"",subHtml:"",type:"url"}),this.setState({items:e})}},{key:"_openItemSettings",value:function(e){this.setState({active:e})}},{key:"_renderItemSettings",value:function(){var e=this.state.items[this.state.active],t=s.getLinkType(e.src);return h.createElement("div",{className:"lg-wrap",style:{padding:"0 12px",display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",color:"#6E778A"}},h.createElement(u.default,{src:e.src,thumbnail:!0,thumb:e.thumb,caption:e.caption,type:t.type,thumbType:"image",onReturn:this._onReturn.bind(this),videoId:t.videoId,onChange:this._onItemChange.bind(this),relativeDir:this.dir}))}},{key:"_onItemChange",value:function(e){var t=this.state.items.slice(),n=Object.assign({},t[this.state.active]);n.src=e.src,n.thumb=e.thumb,n.caption=e.caption,n.type=e.type,n.src||delete n.src,n.thumb||delete n.thumb,n.caption||delete n.caption,t[this.state.active]=n,this.setState({items:t})}},{key:"_onReturn",value:function(){this.setState({active:null})}},{key:"formItemData",value:function(e){if(!JSON.parse(novi.element.getAttribute(e,"data-lg-dynamic-elements")))return null;for(var t=JSON.parse(novi.element.getAttribute(e,"data-lg-dynamic-elements")),n=0;n<t.length;n++){var i=t[n];if(i.src&&(i.type=s.getLinkType(i.src).type),i.subHtml){var l=i.subHtml,r=!0;try{e.matches(l)}catch(e){r=!1}if(r){var a=e.ownerDocument.querySelector(l);a?(a=novi.element.getStaticReference(a),i.caption=a.innerHTML,i.captionElement=a):i.caption=l}else i.caption=l}if(i.html){i.type="video";var o=i.html,c=void 0;try{c=e.ownerDocument.querySelector(o+" video")}catch(e){c=null}if(c)if(c.hasAttribute("src"))i.src=c.getAttribute("src");else{var u=c.querySelector("source");u&&(i.src=u.getAttribute("src"))}}}return t}},{key:"_removeItemHTML",value:function(e){var t=this.state.element.ownerDocument.querySelector(e.html);if(t)return t}},{key:"_removeItemCaption",value:function(e){if(e.subHtml){var t=e.subHtml,n=!0;try{element.matches(t)}catch(e){n=!1}if(n){var i=this.state.element.ownerDocument.querySelector(t);if(i)return i}}}}]),t}(m);t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=novi.react.React,o=novi.react.Component,s=novi.ui.input,c=novi.ui.button,u=novi.language,h=function(e){function t(e){n(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.state={settings:e.settings},l.saveSettings=l.saveSettings.bind(l),l.onChange=l.onChange.bind(l),l.messages=u.getDataByKey("novi-plugin-light-gallery"),l}return l(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({settings:e.settings})}},{key:"render",value:function(){return a.createElement("div",null,a.createElement("span",{style:{letterSpacing:"0,0462em"}},"Light Gallery Plugin"),a.createElement("div",{style:{fontSize:13,color:"#6E778A",marginTop:21}},this.messages.settings.groupPlaceholder),a.createElement(s,{style:{marginTop:10,width:340},value:this.state.settings.groupQuerySelector,onChange:this.onChange.bind(this,"groupQuerySelector")}),a.createElement("div",{style:{fontSize:13,color:"#6E778A",marginTop:21}},this.messages.settings.albumPlaceholder),a.createElement(s,{style:{marginTop:10,width:340},value:this.state.settings.albumQuerySelector,onChange:this.onChange.bind(this,"albumQuerySelector")}),a.createElement("div",{style:{marginTop:30}},a.createElement("div",{style:{fontSize:13,color:"#6E778A",marginTop:21}},this.messages.settings.itemPlaceholder),a.createElement(s,{style:{marginTop:10,width:340},value:this.state.settings.childQuerySelector,onChange:this.onChange.bind(this,"childQuerySelector")})),a.createElement("div",{style:{marginTop:30}},a.createElement(c,{type:"primary",messages:{textContent:this.messages.settings.submitButton},onClick:this.saveSettings})))}},{key:"onChange",value:function(e,t){var n=t.target.value,i=this.state.settings;i[e]=n,i.querySelector=i.groupQuerySelector+", "+i.albumQuerySelector+", "+i.childQuerySelector,this.setState({settings:i})}},{key:"saveSettings",value:function(){novi.plugins.settings.update("novi-plugin-light-gallery",this.state.settings)}}]),t}(o);t.default=h}]);